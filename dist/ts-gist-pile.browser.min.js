"use strict";var TsGistPile=(()=>{var $e=Object.defineProperty;var Ot=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Mt=Object.prototype.hasOwnProperty;var Hr=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,r)=>{for(var t in r)$e(e,t,{get:r[t],enumerable:!0})},Pt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Nt(r))!Mt.call(e,o)&&o!==t&&$e(e,o,{get:()=>r[o],enumerable:!(n=Ot(r,o))||n.enumerable});return e};var Dt=e=>Pt($e({},"__esModule",{value:!0}),e);var Io={};d(Io,{AGGRESSIVE_RETRY_POLICY:()=>It,BooleanStringPair:()=>we,CanonicalUuid:()=>N,Container:()=>Ie,CsvDataExtractor:()=>Ne,DEFAULT_READ_AFTER_WRITE_OPTIONS:()=>_t,DEFAULT_RETRY_OPTIONS:()=>ee,DEFAULT_RETRY_POLICY:()=>St,DateProviderServiceImpl:()=>Ce,EvictionMode:()=>zr,FAST_READ_AFTER_WRITE_OPTIONS:()=>wt,ImmutableUtc:()=>v,LOG_RULES:()=>$r,LlmQueryImpl:()=>Me,NoOpAddEventHandler:()=>Pe,NoOpSpanEndHandler:()=>De,ObjectIdFinder:()=>Re,OptionallyCachedValue:()=>O,PATIENT_READ_AFTER_WRITE_OPTIONS:()=>Rt,SimplestKeyValueStoreInMemImpl:()=>Oe,UtcGetterServiceImpl:()=>Le,VERSION:()=>Ct,anyUtil:()=>ke,arrayUtil:()=>or,b4l:()=>Je,blur:()=>Ye,blurIfEnabled:()=>Be,blurWhereNeeded:()=>se,booleanUtil:()=>Fe,c4l:()=>qe,cloneUtil:()=>Ve,d4l:()=>c,d4lObfuscate:()=>D,d4lPii:()=>Y,dateUtil:()=>le,diceUtil:()=>br,emailUtil:()=>yr,environmentUtil:()=>Ge,extendedExceptionList:()=>nr,extractIpAddress:()=>kr,functionUtil:()=>tr,getLogger:()=>w,idUtil:()=>mr,jsonUtil:()=>Gr,logUtil:()=>Xe,mapUtil:()=>rr,numberUtil:()=>Qe,objectUtil:()=>jr,p4l:()=>We,phoneUtil:()=>hr,plain:()=>je,radixUtil:()=>xe,requestUtil:()=>Vr,retryUtil:()=>Fr,retryWithBackoff:()=>Kr,s4l:()=>Ze,safeStringify:()=>Tt,shortcodeUtil:()=>Er,statUtil:()=>Tr,stringUtil:()=>te,tryUtil:()=>ir,uuidUtil:()=>gr,withStoreId:()=>At});var ke={};d(ke,{hasValue:()=>Ut,isNullish:()=>$t});function Ut(e){return!(typeof e>"u"||e===null)}function $t(e){return typeof e>"u"||e===null}var jr={};var Ve={};d(Ve,{cloneDeep:()=>kt,cloneWithOverrides:()=>Vt});function kt(e){return structuredClone(e)}function Vt(e,r){return{...structuredClone(e),...r}}var te={};d(te,{isBlank:()=>Ke,isEmpty:()=>Ft,isPresent:()=>Kt,isWellFormedCanonicalUuid:()=>re,padLeftWithZeros:()=>Gt,tryRemoveDoubleSlashesIfPresent:()=>Ht,tryRemoveTrailingSlashesIfPresent:()=>zt});function Kt(e){return e==null?!1:typeof e=="string"&&e.trim().length>0}function Ft(e){return e==null||typeof e=="string"&&e.length===0}function Ke(e){return e==null||typeof e=="string"&&e.length>=0&&e.trim().length===0}function re(e){if(e==null)return!1;if(typeof e=="string"){let r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-7][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(e.toLowerCase().match(r))return!0}return!1}function Gt(e,r){let t=e.toString();for(;t.length<r;)t="0"+t;return t}function zt(e){if(e==null)return e;for(;e.endsWith("/");)e=e.replace(/\/$/g,"");return e}function Ht(e,r){if(e==null)return e;for(;e.match(/\/\//);)e=e.replace(/\/\//g,"/");return r?.butTryToBeSmartAboutUrls&&(e=e.replace(/^https:\//,"https://"),e=e.replace(/^http:\//,"http://"),e=e.replace(/^ftp:\//,"ftp://")),e}var Fe={};d(Fe,{doesImplyTrue:()=>jt,isTrueIsh:()=>Bt,isTrueLike:()=>Yt,isTruelike:()=>ne});function ne(e){return e==null?!1:!!["true","yes","t","y","1"].includes(e.toString().trim().toLowerCase())}var jt=ne,Yt=ne,Bt=ne;var Xe={};d(Xe,{b4l:()=>Je,blur:()=>Ye,blurIfEnabled:()=>Be,blurWhereNeeded:()=>se,c4l:()=>qe,d4l:()=>c,d4lObfuscate:()=>D,d4lPii:()=>Y,p4l:()=>We,plain:()=>je,s4l:()=>Ze});var Ge={};d(Ge,{isDevelopmentLikeEnv:()=>qt,isEagerAutoSanitizeEnabled:()=>j,isProductionLikeEnv:()=>Jt,isStagingLikeEnv:()=>Zt,isTestLikeEnv:()=>Xt,resetEnvVarCache:()=>Wt,tryGetEnvVar:()=>p});var H=new Map;function Wt(){H.clear()}function p(e){let r;typeof r>"u"&&typeof process<"u"&&typeof process.env?.[e]<"u"&&(r=process.env[e],H.has(`process.env.${e}`)||(console.log(`ts-gist-pile: tryGetEnvVar(): During logger configuration, found process.env[${e}] = ${r}`),H.set(`process.env.${e}`,!0)));let t=["REACT_APP_","VITE_"];for(let n=0;n<t.length;++n){let o=t[n];if(typeof r>"u"){let i=`${o}${e}`;typeof process<"u"&&typeof process.env?.[i]<"u"&&(r=process.env[i],H.has(`process.env.${i}`)||(console.log(`ts-gist-pile: tryGetEnvVar(): During logger configuration, found process.env[${i}] = ${r}`),H.set(`process.env.${i}`,!0)))}}return r}function Jt(){let e=p("NODE_ENV");return e==="production"||e==="prod"}function qt(){let e=p("NODE_ENV");return e==="development"||e==="dev"}function Zt(){let e=p("NODE_ENV");return e==="staging"||e==="stage"}function Xt(){return p("NODE_ENV")==="test"}function j(){let e=p("LOG_EAGER_AUTO_SANITIZE");return Qt(e)}function Qt(e){return e==null?!1:!!["true","yes","t","y","1"].includes(e.toString().trim().toLowerCase())}function M(e){let r=e.length;if(/^\d{15,16}$/.test(e))return`****${e.substring(r-4)}`;if(/^[\d\s\-]{15,19}$/.test(e)&&/\d{4}/.test(e.substring(r-4)))return`****${e.substring(r-4)}`;if(/^\d{3}-\d{2}-\d{4}$/.test(e))return`****${e.substring(r-4)}`;if(/^\+?[\d\s\-()]{10,}$/.test(e)&&e.replace(/\D/g,"").length>=10)return`****${e.substring(r-4)}`;if(e.includes("@")&&e.includes(".")&&/^[a-zA-Z0-9]/.test(e)){let t=e.split("@");if(t.length===2&&t[0].length>0&&/^[a-zA-Z0-9]/.test(t[1])){let n=t[0],o=t[1];return n.length<=2?`****@${o}`:`${n.substring(0,2)}****@${o}`}}if(/^[A-Z][a-z]+(\s+[A-Z][a-z]+)+$/.test(e)){let t=e.split(" ");return`${t[0].substring(0,2)}**** ${t[t.length-1].substring(0,2)}****`}return r>36?`****${e.substring(r-6)}`:r>26?`****${e.substring(r-5)}`:r>16?`****${e.substring(r-4)}`:r>10?`****${e.substring(r-2)}`:"****"}var oe;if(typeof window>"u"&&typeof global<"u")try{oe=Hr("crypto")}catch{}var Yr=["userId","user_id","principalId","principal_id","uid","login","username","user_name","userName","email","e_mail","e-mail","eMail","Email","emailAddress","email_address","emailSanitized","email_sanitized","emailNormalized","email_normalized","name","fullname","fullName","full_name","firstName","first_name","lastName","last_name","middleName","middle_name","phone","phoneNumber","phone_number","telephone","mobile","cellPhone","ssn","socialSecurity","social_security","dob","dateOfBirth","date_of_birth","birthdate","birth_date","passport","passportNumber","passport_number","license","driversLicense","drivers_license","driverLicense","driver_license","creditCard","credit_card","creditCardNumber","credit_card_number","ccNumber","cc_number","cardNumber","card_number","cvv","cvc","securityCode","security_code","accountNumber","account_number","bankAccount","bank_account","routingNumber","routing_number","address","street","streetAddress","street_address","city","state","province","zip","zipCode","zip_code","postal","postalCode","postal_code","country","ip","ipAddress","ip_address","ipv4","ipv6","lat","latitude","lon","longitude","coordinates","password","passwd","pwd","pass","secret","apiKey","api_key","accessToken","access_token","refreshToken","refresh_token","token","auth","authToken","auth_token","privateKey","private_key","publicKey","public_key","medicalRecordNumber","medical_record_number","mrn","healthInsurance","health_insurance","insuranceNumber","insurance_number"];function P(){if(typeof window<"u")return!1;let e=p("LOG_HASH_SECRET");return e!=null&&e.trim().length>0&&oe!=null}function Br(e){if(e==null)return"null";if(!oe)return"****";let r=p("LOG_HASH_SECRET")||"";try{return oe.createHash("sha256").update(e+r).digest("hex").substring(0,12)}catch{return"****"}}function ie(e){return Br(e)}function ae(e){if(!P()||e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(t=>ae(t));let r={};for(let[t,n]of Object.entries(e)){let o=t.toLowerCase(),i=o.startsWith("_")?o.substring(1):o;if(Yr.some(s=>{let l=s.toLowerCase();return o===l||i===l||o.includes(l)||i.includes(l)})){let s=`${t}_hash`;r[s]=Br(n!=null?String(n):n)}else typeof n=="object"&&n!==null?r[t]=ae(n):r[t]=n}return r}function en(e){let r=e;return r=r.replace(/\b\d{4}[\s\-]?\d{4}[\s\-]?\d{4}[\s\-]?\d{3,4}\b/g,t=>{let n=t.replace(/\D/g,"");return n.length>=15&&n.length<=16?"****"+t.slice(-4):t}),r=r.replace(/\b\d{3}-\d{2}-\d{4}\b/g,t=>"****"+t.slice(-4)),r=r.replace(/\b[\+]?[\d\s\-\(\)]{10,}\b/g,t=>{let n=t.replace(/\D/g,"");return n.length>=10&&n.length<=15?"****"+t.slice(-4):t}),r=r.replace(/\b[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}\b/g,t=>{let n=t.split("@"),o=n[0],i=n[1];return o.length<=2?`****@${i}`:`${o.substring(0,2)}****@${i}`}),r=r.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,t=>t.split(".").every(o=>parseInt(o)<=255)?`****${t.slice(-4)}`:t),r=r.replace(/\b([A-Z][a-z]{2,})\s+([A-Z][a-z]{2,})\b/g,(t,n,o)=>`${n.substring(0,2)}**** ${o.substring(0,2)}****`),r}function R(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(t=>R(t));let r={};for(let[t,n]of Object.entries(e)){let o=t.toLowerCase(),i=o.startsWith("_")?o.substring(1):o,a=Yr.some(s=>{let l=s.toLowerCase();return o===l||i===l||o.includes(l)||i.includes(l)});if(a&&typeof n=="string"){let s=M(n);if(P()&&n.length>10){let l=ie(n);s=`${s} (hashed=${l})`}r[t]=s}else if(a&&n!=null){let s=String(n),l=M(s);if(P()&&s.length>10){let u=ie(s);l=`${l} (hashed=${u})`}r[t]=l}else if(typeof n=="string"){let s=en(n);r[t]=s}else typeof n=="object"&&n!==null?r[t]=R(n):r[t]=n}return r}function c(e,r={}){if(typeof e>"u")return"<undefined> (undefined)";if(e==null)return"<null> (null)";if(typeof e=="string")return r.obfuscate?M(e):(r.joinLines&&(e=e?.replace(/\r\n/g," "),e=e?.replace(/\n\r/g," "),e=e?.replace(/\n/g," "),e=e?.replace(/\r/g," ")),`'${e}' (string, ${e.length})`);if(typeof e=="number")return`${e} (number)`;if(typeof e=="boolean")return`${e==!0?"TRUE":"FALSE"} (boolean)`;if(e instanceof Error){let t=e.stack;return t=t?.replace(/\r\n/g,"\\n,   "),t=t?.replace(/\n\r/g,"\\n,   "),t=t?.replace(/\n/g,"\\n,   "),t=t?.replace(/\r/g,"\\n,   "),`${e} (Error, stack: ${t}`}else if(Array.isArray(e)){let t=[],n=e;return n.length>0&&t.push(`${c(n[0])}`),n.length>2&&t.push("\u2026"),n.length>1&&t.push(`${c(n[n.length-1])}`),`Array(len=${n.length}) [${t.join(", ")}]`}else{if(Object.prototype.toString.call(e)==="[object Date]")return e.toISOString();if(e instanceof RegExp)return e.toString()+" (RegExp)";if(typeof e=="object"){let t=e;if(j()&&(t=R(e)),typeof t.toDebugString=="function")return t.toDebugString()+" (object; via toDebugString())";if(typeof t.toLogString=="function")return t.toLogString()+" (object; via toLogString())";if(typeof t.asJson=="function"){let n=t.asJson();try{return Wr(n)||`${t}`}catch{}}try{return Wr(t)+" (object)"}catch{}}}return`${e}`}function D(e,r={}){if(e instanceof Error||e instanceof Date||e instanceof RegExp)return c(e,r);if(typeof e=="object"&&e!==null){let t=R(e);return c(t,r)}if(typeof e=="string"){let t=M(e);if(P()&&e.length>10){let n=ie(e);return`${t} (hashed=${n})`}return t}return c(e,r)}function Y(e,r={}){return P()&&typeof e=="string"?D(e,r):c(e,r)}function ze(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(t=>typeof t=="string"?He(t):typeof t=="object"?ze(t):t);let r={};for(let[t,n]of Object.entries(e))typeof n=="string"?r[t]=He(n):typeof n=="object"&&n!==null?r[t]=ze(n):r[t]=n;return r}function He(e){let r=e;return r=r.replace(/\b\d{4}[\s\-]?\d{4}[\s\-]?\d{4}[\s\-]?\d{3,4}\b/g,t=>{let n=t.replace(/\D/g,"");return n.length>=15&&n.length<=16?"****"+t.slice(-4):t}),r=r.replace(/\b\d{3}-\d{2}-\d{4}\b/g,t=>"****"+t.slice(-4)),r=r.replace(/\b[\+]?[\d\s\-\(\)]{10,}\b/g,t=>{let n=t.replace(/\D/g,"");return n.length>=10&&n.length<=15?"****"+t.slice(-4):t}),r=r.replace(/\b[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}\b/g,t=>{let n=t.split("@"),o=n[0],i=n[1];return o.length<=2?`****@${i}`:`${o.substring(0,2)}****@${i}`}),r=r.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,t=>t.split(".").every(o=>parseInt(o)<=255)?`****${t.slice(-4)}`:t),r=r.replace(/\b([A-Z][a-z]{2,})\s+([A-Z][a-z]{2,})\b/g,(t,n,o)=>`${n.substring(0,2)}**** ${o.substring(0,2)}****`),r}function se(e,r={}){if(typeof e=="object"&&e!==null){let t=ze(e);return c(t,r)}return typeof e!="string"?c(e,r):He(e)}var je=c,Ye=D,Be=Y,We=c,Je=D,qe=Y,Ze=se,Wr=(e,r=0)=>{let t=[];try{let n=JSON.stringify(e,(o,i)=>i instanceof RegExp?i.toString():typeof i=="object"&&i!==null?t.includes(i)?void 0:t.push(i)&&i:i,r);return t=null,n}catch{t=null;return}};var Qe={};d(Qe,{ensureNumber:()=>tn,tryAsNumber:()=>rn});function rn(e){if(typeof e=="number")return e;if(typeof e>"u")return;if(e==null)return null;if(typeof e=="string"){let r=e.trim();if(r.length>0&&!isNaN(r))try{return parseFloat(e)}catch{}}}function tn(e){if(typeof e=="number")return e;if(typeof e=="string"){let r=e.trim();if(r.length>0&&!isNaN(r))try{return parseFloat(e)}catch(t){throw t}}throw new Error("Not a number")}var le={};d(le,{dateToYyyyMmDdStringAtUtc:()=>er,generateSortedFiveMinuteBucketsForYearInSeconds:()=>nn,getDateInLondon:()=>on,getMillisecondsBetweenDates:()=>an,getMillisecondsBetweenEpochAndDate:()=>un,getSecondsBetweenDates:()=>sn,getSecondsBetweenEpochAndDate:()=>ln,isIso8601:()=>fn,isIso8601Utc:()=>dn,isValidDateObject:()=>cn});function nn(e){let r=Date.UTC(e,0,0,0,0,0),t=Date.UTC(e+1,0,0,0,0,0),n=[],o=r;for(;o<t;)n.push(o/1e3),o+=300*1e3;return n}function er(e){let r=new Date(e.toUTCString());return`${r.getUTCFullYear()}${Jr(r.getUTCMonth()+1,2)}${Jr(r.getUTCDate(),2)}`}function on(e){return new Date(e.toUTCString())}function Jr(e,r){let t=e.toString();for(;t.length<r;)t="0"+t;return t}function an(e,r){return r.getTime()-e.getTime()}function sn(e,r){return Math.floor((r.getTime()-e.getTime())/1e3)}function ln(e){return Math.floor(e.getTime()/1e3)}function un(e){return e.getTime()}function cn(e){return!!(e&&Object.prototype.toString.call(e)==="[object Date]"&&!isNaN(e))}function fn(e){return typeof e!="string"?!1:new Date(e).toISOString()===e}function dn(e){if(typeof e!="string"||!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;let r=new Date(e);return!isNaN(r.getTime())&&r.toISOString()===e}var rr={};d(rr,{getKeys:()=>pn});function pn(e){return Array.from(e.keys())}var tr={};d(tr,{tryFn:()=>gn});var gn=e=>{try{return e()}catch{return}};var nr={};d(nr,{ActuallyUnauthenticated401Exception:()=>fe,ArgumentException:()=>ge,BadRequest400Exception:()=>ce,Forbidden403Exception:()=>de,InternalServerError500Exception:()=>me,NotFound404Exception:()=>pe,NotImplementedException:()=>he,ProgrammerErrorException:()=>ue,ServiceUnavailable503Exception:()=>ye});var ue=class e extends Error{constructor(r=void 0){super(`ProgrammerErrorException${r?": "+r:""}`),Object.setPrototypeOf(this,e.prototype)}};var ce=class e extends Error{constructor(t=void 0){super(`BadRequest400Exception${t?": "+t:""}`);this.statusCode=400;Object.setPrototypeOf(this,e.prototype)}};var fe=class e extends Error{constructor(t=void 0){super(`ActuallyUnauthenticated401Exception${t?": "+t:""}`);this.statusCode=401;Object.setPrototypeOf(this,e.prototype)}};var de=class e extends Error{constructor(t=void 0){super(`Forbidden403Exception${t?": "+t:""}`);this.statusCode=403;Object.setPrototypeOf(this,e.prototype)}};var pe=class e extends Error{constructor(t=void 0){super(`NotFound404Exception${t?": "+t:""}`);this.statusCode=404;Object.setPrototypeOf(this,e.prototype)}};var ge=class e extends Error{constructor(r=void 0){super(`ArgumentException${r?": "+r:""}`),Object.setPrototypeOf(this,e.prototype)}};var me=class e extends Error{constructor(t=void 0){super(`InternalServerError500Exception${t?": "+t:""}`);this.statusCode=500;Object.setPrototypeOf(this,e.prototype)}};var ye=class e extends Error{constructor(t=void 0){super(`ServiceUnavailable503Exception${t?": "+t:""}`);this.statusCode=503;Object.setPrototypeOf(this,e.prototype)}};var he=class e extends Error{constructor(r=void 0){super(`NotImplementedException${r?": "+r:""}`),Object.setPrototypeOf(this,e.prototype)}};var or={};d(or,{existsButIsEmpty:()=>xn,hasExactlyOneItem:()=>yn,isPopulated:()=>hn,tryParseStringToArray:()=>mn});function mn(e){if(e==null)return[];e=e.replace(/\[/g,""),e=e.replace(/\]/g,""),e=e.replace(/\"/g,""),e=e.replace(/\'/g,"");let r=e.split(/[,;\s\t]/),t=[];for(let n of r)if(n.trim().length>0){let o=n.trim();o.length>0&&t.push(o)}return t}function yn(e){return!!(Array.isArray(e)&&e.length==1)}function hn(e){return!!(Array.isArray(e)&&e.length>0)}function xn(e){return!!(Array.isArray(e)&&e.length===0)}var ir={};d(ir,{tryCatchTuplify:()=>bn,tryCatchTuplifyAsync:()=>vn});function bn(e){try{return[e(),null]}catch(r){return[null,r]}}async function vn(e){try{return[await e,null]}catch(r){return[null,r]}}var xe={};d(xe,{convertHexToBase62:()=>sr,convertHexToNanoIdAlphabet:()=>lr,decodeBase62ToNumber:()=>Sn,encodeNumberAsBase62:()=>En});var ar="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var An="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz-";function En(e){if(e===0)return"0";if(e<0)throw new Error("Cannot encode negative numbers");let r="";for(;e>0;)r=ar[e%62]+r,e=Math.floor(e/62);return r}var Tn=Object.fromEntries(ar.split("").map((e,r)=>[e,r]));function Sn(e){let r=0;for(let t=0;t<e.length;t++){let n=e[t],o=Tn[n];if(typeof o>"u")throw new Error(`Invalid base62 character: ${n}`);r=r*62+o}return r}function sr(e){if(!/^[0-9a-fA-F]+$/.test(e))throw new Error("Invalid hex input");let r="0";for(let n=0;n<e.length;n++){let o=parseInt(e[n],16);r=qr(r,16),r=Zr(r,o.toString())}if(r==="0")return"0";let t="";for(;r!=="0";){let{quotient:n,remainder:o}=Xr(r,62);t=ar[parseInt(o,10)]+t,r=n}return t}function lr(e){if(!/^[0-9a-fA-F]+$/.test(e))throw new Error("Invalid hex input");let r="0";for(let n=0;n<e.length;n++){let o=parseInt(e[n],16);r=qr(r,16),r=Zr(r,o.toString())}if(r==="0")return"0";let t="";for(;r!=="0";){let{quotient:n,remainder:o}=Xr(r,64);t=An[parseInt(o,10)]+t,r=n}return t}function qr(e,r){let t=0,n="";for(let o=e.length-1;o>=0;o--){let i=parseInt(e[o],10)*r+t;n=(i%10).toString()+n,t=Math.floor(i/10)}return t>0&&(n=t.toString()+n),n}function Zr(e,r){let t="",n=0,o=e.length-1,i=r.length-1;for(;o>=0||i>=0||n>0;){let a=o>=0?parseInt(e[o--],10):0,s=i>=0?parseInt(r[i--],10):0,l=a+s+n;t=(l%10).toString()+t,n=Math.floor(l/10)}return t}function Xr(e,r){let t="",n=0;for(let o=0;o<e.length;o++){let i=parseInt(e[o],10),a=n*10+i,s=Math.floor(a/r);n=a%r,(t!==""||s>0)&&(t+=s.toString())}return{quotient:t||"0",remainder:n.toString()}}var gr={};d(gr,{generateV6:()=>Un,generateV7:()=>$n});var Qr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function In(e){return typeof e=="string"&&Qr.test(e)}var et=In;function _n(e){if(!et(e))throw TypeError("Invalid UUID");let r;return Uint8Array.of((r=parseInt(e.slice(0,8),16))>>>24,r>>>16&255,r>>>8&255,r&255,(r=parseInt(e.slice(9,13),16))>>>8,r&255,(r=parseInt(e.slice(14,18),16))>>>8,r&255,(r=parseInt(e.slice(19,23),16))>>>8,r&255,(r=parseInt(e.slice(24,36),16))/1099511627776&255,r/4294967296&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255)}var rt=_n;var m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));function A(e,r=0){return(m[e[r+0]]+m[e[r+1]]+m[e[r+2]]+m[e[r+3]]+"-"+m[e[r+4]]+m[e[r+5]]+"-"+m[e[r+6]]+m[e[r+7]]+"-"+m[e[r+8]]+m[e[r+9]]+"-"+m[e[r+10]]+m[e[r+11]]+m[e[r+12]]+m[e[r+13]]+m[e[r+14]]+m[e[r+15]]).toLowerCase()}var ur,wn=new Uint8Array(16);function E(){if(!ur){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ur=crypto.getRandomValues.bind(crypto)}return ur(wn)}var B={};function Rn(e,r,t){let n,o=e?._v6??!1;if(e){let i=Object.keys(e);i.length===1&&i[0]==="_v6"&&(e=void 0)}if(e)n=tt(e.random??e.rng?.()??E(),e.msecs,e.nsecs,e.clockseq,e.node,r,t);else{let i=Date.now(),a=E();Cn(B,i,a),n=tt(a,B.msecs,B.nsecs,o?void 0:B.clockseq,o?void 0:B.node,r,t)}return r??A(n)}function Cn(e,r,t){return e.msecs??(e.msecs=-1/0),e.nsecs??(e.nsecs=0),r===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):r>e.msecs?e.nsecs=0:r<e.msecs&&(e.node=void 0),e.node||(e.node=t.slice(10,16),e.node[0]|=1,e.clockseq=(t[8]<<8|t[9])&16383),e.msecs=r,e}function tt(e,r,t,n,o,i,a=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!i)i=new Uint8Array(16),a=0;else if(a<0||a+16>i.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);r??(r=Date.now()),t??(t=0),n??(n=(e[8]<<8|e[9])&16383),o??(o=e.slice(10,16)),r+=122192928e5;let s=((r&268435455)*1e4+t)%4294967296;i[a++]=s>>>24&255,i[a++]=s>>>16&255,i[a++]=s>>>8&255,i[a++]=s&255;let l=r/4294967296*1e4&268435455;i[a++]=l>>>8&255,i[a++]=l&255,i[a++]=l>>>24&15|16,i[a++]=l>>>16&255,i[a++]=n>>>8|128,i[a++]=n&255;for(let u=0;u<6;++u)i[a++]=o[u];return i}var nt=Rn;function cr(e){let r=typeof e=="string"?rt(e):e,t=Ln(r);return typeof e=="string"?A(t):t}function Ln(e){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}var On=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fr={randomUUID:On};function Nn(e,r,t){if(fr.randomUUID&&!r&&!e)return fr.randomUUID();e=e||{};let n=e.random??e.rng?.()??E();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){if(t=t||0,t<0||t+16>r.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let o=0;o<16;++o)r[t+o]=n[o];return r}return A(n)}var dr=Nn;function Mn(e,r,t){e??(e={}),t??(t=0);let n=nt({...e,_v6:!0},new Uint8Array(16));if(n=cr(n),r){for(let o=0;o<16;o++)r[t+o]=n[o];return r}return A(n)}var W=Mn;var pr={};function Pn(e,r,t){let n;if(e)n=ot(e.random??e.rng?.()??E(),e.msecs,e.seq,r,t);else{let o=Date.now(),i=E();Dn(pr,o,i),n=ot(i,pr.msecs,pr.seq,r,t)}return r??A(n)}function Dn(e,r,t){return e.msecs??(e.msecs=-1/0),e.seq??(e.seq=0),r>e.msecs?(e.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],e.msecs=r):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}function ot(e,r,t,n,o=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),o=0;else if(o<0||o+16>n.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);return r??(r=Date.now()),t??(t=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9]),n[o++]=r/1099511627776&255,n[o++]=r/4294967296&255,n[o++]=r/16777216&255,n[o++]=r/65536&255,n[o++]=r/256&255,n[o++]=r&255,n[o++]=112|t>>>28&15,n[o++]=t>>>20&255,n[o++]=128|t>>>14&63,n[o++]=t>>>6&255,n[o++]=t<<2&255|e[10]&3,n[o++]=e[11],n[o++]=e[12],n[o++]=e[13],n[o++]=e[14],n[o++]=e[15],n}var I=Pn;function Un(){return W()}function $n(){return I()}var mr={};d(mr,{generateTimeOrderedBase62Id:()=>kn,generateTimeOrderedNanoLikeId:()=>Vn});function kn(){return sr(I().toLowerCase().replace(/-/g,""))}function Vn(){return lr(I().toLowerCase().replace(/-/g,""))}var yr={};d(yr,{normalizeEmail:()=>Kn});function Kn(e){return e.trim().toLowerCase()}var hr={};d(hr,{normalizePhone:()=>Fn});function Fn(e){if(!e||e.trim().length===0)throw new Error("Phone number cannot be empty");let r=e.replace(/[\s\-\(\)\.\[\]]/g,""),t=r.startsWith("+"),n=r.replace(/\D/g,"");if(t)r="+"+n;else if(n.length===10)r="+1"+n;else if(n.length===11&&n.startsWith("1"))r="+"+n;else throw n.length>=7&&n.length<=15?new Error(`Phone number must include country code (use +): ${e}`):new Error(`Invalid phone number length: ${e}`);if(!/^\+[1-9]\d{6,14}$/.test(r))throw new Error(`Invalid E.164 format: ${r} (from: ${e})`);return r}var br={};d(br,{beTrueXPercentOfTheTime:()=>zn,rollOneDie:()=>xr,xTimesRollDie:()=>Gn});function xr(e){return Math.floor(Math.random()*e+1)}function Gn(e,r){let t=0;for(let n=0;n<e;n++)t=t+xr(r);return t}function zn(e){return xr(100)<=e}var Er={};d(Er,{ALPHABET_56:()=>Ar,ALPHABET_58:()=>vr,calculateCombinations:()=>Bn,generateShortCode56:()=>jn,generateShortCode58:()=>Hn,normalizeShortCode58:()=>Yn});var vr="0123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz",Ar="23456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz";function Hn(e=8){let r="";for(let t=0;t<e;t++){let n=Math.floor(Math.random()*vr.length);r+=vr[n]}return r}function jn(e=8){let r="";for(let t=0;t<e;t++){let n=Math.floor(Math.random()*Ar.length);r+=Ar[n]}return r}function Yn(e){return e.replace(/[Oo]/g,"0").replace(/[lI]/g,"1")}function Bn(e,r){return Math.pow(e,r)}var Vr={};d(Vr,{extractIpAddress:()=>kr});var Tr={};d(Tr,{sendPlusOneCountToStathat:()=>Wn,sendStatToKpitracks:()=>J});function Wn(e){if(process.env.STATHAT_EZ_KEY!=null&&process.env.STATHAT_EZ_KEY.trim()?.length>0){let r=new AbortController,t=setTimeout(()=>r.abort(),750),n="https://api.stathat.com/ez",i=`stat=${e.trim()}&ezkey=${process.env.STATHAT_EZ_KEY?.trim()}&count=1`;setTimeout(()=>{let a=new Date;fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:r.signal,body:i}).then(s=>{let l=new Date().getTime()-a.getTime();clearTimeout(t)}).catch(s=>{})},0)}}function J(e){let r=process.env.KPITRACKS_EZ_KEY;if(r=r?.trim(),r!=null&&r?.length>0){let t=new AbortController,n=setTimeout(()=>t.abort(),750),o="https://stat.kpitracks.com/c";e=e+`&ezkey=${process.env.KPITRACKS_EZ_KEY?.trim()}`,console.log(`sendStatToKpitracks(): Sending POST to Stathat url = '${o}',  requestBodyString = '${e}'`);let i=new Date;fetch(o,{method:"POST",signal:t.signal,body:e}).then(a=>{let s=new Date().getTime()-i.getTime();clearTimeout(n)}).catch(a=>{console.log(`sendStatToKpitracks(): Failed to send stat.  requestBodyString = ${e},  Reason: ${JSON.stringify(a)}`)})}}var it=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};var T="1.9.0";var at=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Jn(e){var r=new Set([e]),t=new Set,n=e.match(at);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(l){return l===e};function i(s){return t.add(s),!1}function a(s){return r.add(s),!0}return function(l){if(r.has(l))return!0;if(t.has(l))return!1;var u=l.match(at);if(!u)return i(l);var f={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return f.prerelease!=null||o.major!==f.major?i(l):o.major===0?o.minor===f.minor&&o.patch<=f.patch?a(l):i(l):o.minor<=f.minor?a(l):i(l)}}var st=Jn(T);var qn=T.split(".")[0],q=Symbol.for("opentelemetry.js.api."+qn),Z=it;function U(e,r,t,n){var o;n===void 0&&(n=!1);var i=Z[q]=(o=Z[q])!==null&&o!==void 0?o:{version:T};if(!n&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return t.error(a.stack||a.message),!1}if(i.version!==T){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+T);return t.error(a.stack||a.message),!1}return i[e]=r,t.debug("@opentelemetry/api: Registered a global for "+e+" v"+T+"."),!0}function S(e){var r,t,n=(r=Z[q])===null||r===void 0?void 0:r.version;if(!(!n||!st(n)))return(t=Z[q])===null||t===void 0?void 0:t[e]}function $(e,r){r.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+T+".");var t=Z[q];t&&delete t[e]}var Zn=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Xn=function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},lt=(function(){function e(r){this._namespace=r.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return X("debug",this._namespace,r)},e.prototype.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return X("error",this._namespace,r)},e.prototype.info=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return X("info",this._namespace,r)},e.prototype.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return X("warn",this._namespace,r)},e.prototype.verbose=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return X("verbose",this._namespace,r)},e})();function X(e,r,t){var n=S("diag");if(n)return t.unshift(r),n[e].apply(n,Xn([],Zn(t),!1))}var h;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(h||(h={}));function ut(e,r){e<h.NONE?e=h.NONE:e>h.ALL&&(e=h.ALL),r=r||{};function t(n,o){var i=r[n];return typeof i=="function"&&e>=o?i.bind(r):function(){}}return{error:t("error",h.ERROR),warn:t("warn",h.WARN),info:t("info",h.INFO),debug:t("debug",h.DEBUG),verbose:t("verbose",h.VERBOSE)}}var Qn=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eo=function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},ro="diag",k=(function(){function e(){function r(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=S("diag");if(s)return s[o].apply(s,eo([],Qn(i),!1))}}var t=this,n=function(o,i){var a,s,l;if(i===void 0&&(i={logLevel:h.INFO}),o===t){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof i=="number"&&(i={logLevel:i});var f=S("diag"),y=ut((s=i.logLevel)!==null&&s!==void 0?s:h.INFO,o);if(f&&!i.suppressOverrideMessage){var g=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+g),y.warn("Current logger will overwrite one already registered from "+g)}return U("diag",y,t,!0)};t.setLogger=n,t.disable=function(){$(ro,t)},t.createComponentLogger=function(o){return new lt(o)},t.verbose=r("verbose"),t.debug=r("debug"),t.info=r("info"),t.warn=r("warn"),t.error=r("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function ct(e){return Symbol.for(e)}var to=(function(){function e(r){var t=this;t._currentContext=r?new Map(r):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,o){var i=new e(t._currentContext);return i._currentContext.set(n,o),i},t.deleteValue=function(n){var o=new e(t._currentContext);return o._currentContext.delete(n),o}}return e})(),ft=new to;var no=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},oo=function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},dt=(function(){function e(){}return e.prototype.active=function(){return ft},e.prototype.with=function(r,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return t.call.apply(t,oo([n],no(o),!1))},e.prototype.bind=function(r,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})();var io=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ao=function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},Sr="context",so=new dt,V=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(r){return U(Sr,r,k.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(r,t,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,ao([r,t,n],io(i),!1))},e.prototype.bind=function(r,t){return this._getContextManager().bind(r,t)},e.prototype._getContextManager=function(){return S(Sr)||so},e.prototype.disable=function(){this._getContextManager().disable(),$(Sr,k.instance())},e})();var be;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(be||(be={}));var Ir="0000000000000000",_r="00000000000000000000000000000000",pt={traceId:_r,spanId:Ir,traceFlags:be.NONE};var _=(function(){function e(r){r===void 0&&(r=pt),this._spanContext=r}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(r,t){return this},e.prototype.setAttributes=function(r){return this},e.prototype.addEvent=function(r,t){return this},e.prototype.addLink=function(r){return this},e.prototype.addLinks=function(r){return this},e.prototype.setStatus=function(r){return this},e.prototype.updateName=function(r){return this},e.prototype.end=function(r){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(r,t){},e})();var wr=ct("OpenTelemetry Context Key SPAN");function ve(e){return e.getValue(wr)||void 0}function gt(){return ve(V.getInstance().active())}function Q(e,r){return e.setValue(wr,r)}function mt(e){return e.deleteValue(wr)}function yt(e,r){return Q(e,new _(r))}function Ae(e){var r;return(r=ve(e))===null||r===void 0?void 0:r.spanContext()}var lo=/^([0-9a-f]{32})$/i,uo=/^[0-9a-f]{16}$/i;function co(e){return lo.test(e)&&e!==_r}function fo(e){return uo.test(e)&&e!==Ir}function Ee(e){return co(e.traceId)&&fo(e.spanId)}function ht(e){return new _(e)}var Rr=V.getInstance(),Te=(function(){function e(){}return e.prototype.startSpan=function(r,t,n){n===void 0&&(n=Rr.active());var o=!!t?.root;if(o)return new _;var i=n&&Ae(n);return po(i)&&Ee(i)?new _(i):new _},e.prototype.startActiveSpan=function(r,t,n,o){var i,a,s;if(!(arguments.length<2)){arguments.length===2?s=t:arguments.length===3?(i=t,s=n):(i=t,a=n,s=o);var l=a??Rr.active(),u=this.startSpan(r,i,l),f=Q(l,u);return Rr.with(f,s,void 0,u)}},e})();function po(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var go=new Te,xt=(function(){function e(r,t,n,o){this._provider=r,this.name=t,this.version=n,this.options=o}return e.prototype.startSpan=function(r,t,n){return this._getTracer().startSpan(r,t,n)},e.prototype.startActiveSpan=function(r,t,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var r=this._provider.getDelegateTracer(this.name,this.version,this.options);return r?(this._delegate=r,this._delegate):go},e})();var bt=(function(){function e(){}return e.prototype.getTracer=function(r,t,n){return new Te},e})();var mo=new bt,Cr=(function(){function e(){}return e.prototype.getTracer=function(r,t,n){var o;return(o=this.getDelegateTracer(r,t,n))!==null&&o!==void 0?o:new xt(this,r,t,n)},e.prototype.getDelegate=function(){var r;return(r=this._delegate)!==null&&r!==void 0?r:mo},e.prototype.setDelegate=function(r){this._delegate=r},e.prototype.getDelegateTracer=function(r,t,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(r,t,n)},e})();var Lr=V.getInstance();var Or="trace",vt=(function(){function e(){this._proxyTracerProvider=new Cr,this.wrapSpanContext=ht,this.isSpanContextValid=Ee,this.deleteSpan=mt,this.getSpan=ve,this.getActiveSpan=gt,this.getSpanContext=Ae,this.setSpan=Q,this.setSpanContext=yt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(r){var t=U(Or,this._proxyTracerProvider,k.instance());return t&&this._proxyTracerProvider.setDelegate(r),t},e.prototype.getTracerProvider=function(){return S(Or)||this._proxyTracerProvider},e.prototype.getTracer=function(r,t){return this.getTracerProvider().getTracer(r,t)},e.prototype.disable=function(){$(Or,k.instance()),this._proxyTracerProvider=new Cr},e})();var Nr=vt.getInstance();var Pr;if(typeof window>"u"&&typeof global<"u"){let{AsyncLocalStorage:e}=Hr("async_hooks");Pr=e}var L;Pr!=null&&(L=new Pr);var Dr=class e{static getLogger(r){e.mapOfLoggers==null&&(e.mapOfLoggers=new Map);let t=this.mapOfLoggers.get(r);return t==null&&(t=new Ur(r),e.mapOfLoggers.set(r,t)),t}static resetLoggerCache(){e.mapOfLoggers=new Map}},Ur=class{constructor(r){this.loggerName=r}buildLogMsg(r,t,n){return b(p("LOG_USE_JSON_FORMAT"))?this.buildLogMsgJsonFormat(r,t,n):this.buildLogMsgPlainText(r,t,n)}buildLogMsgJsonFormat(r,t,n){let o={};typeof process<"u"&&b(p("LOG_PREPEND_TIMESTAMP"))&&(o.at=new Date().toISOString()),r=r.replace(/[\[\]]/g,"").trim(),o.lvl=r,o.logger=this.loggerName,typeof t=="function"?o.msg=t():o.msg=t,n=this.buildCompleteJsonContext(n);let i={...n,...o};return JSON.stringify(i)}buildCompleteJsonContext(r){let t={};if(r instanceof Error?t={error:r.message,errorName:r.name,errorStack:r.stack}:r!=null&&(t={...r}),L!=null)try{let o=L.getStore();if(o!=null&&typeof o=="object"){let i=o.storeId;i!=null&&(t=Object.assign({},t,{storeId:i}))}}catch{}let n=Nr.getSpan(Lr.active());if(n){let{traceId:o,spanId:i}=n.spanContext();t=Object.assign({},t,{trace_id:o,span_id:i})}return j()?t=R(t):p("LOG_HASH_SECRET")&&(t=ae(t)),t}buildLogMsgPlainText(r,t,n){let o=[];typeof process<"u"&&b(p("LOG_PREPEND_TIMESTAMP"))&&o.push(new Date().toUTCString()),o.push(r),o.push(this.loggerName),typeof t=="function"?o.push(t()):o.push(t),n=this.buildCompleteJsonContext(n);let i=JSON.stringify(n);return i!=null&&i.length>0&&i!="{}"&&i!="{ }"&&o.push(i),o.join(" ")}writeLogMsgToTerminal(r,...t){typeof process<"u"&&b(p("LOG_TO_STDERR"))?t.length===0?console.error(r):t.length>0&&console.error(r,t):t.length===0?console.log(r):t.length>0&&console.log(r,t)}trace(r,t=void 0,...n){if(C(this.loggerName,"TRACE")){let o=this.buildLogMsg("[ TRACE]",r,t);this.writeLogMsgToTerminal(o)}}debug(r,t=void 0,...n){if(C(this.loggerName,"DEBUG")){let o=this.buildLogMsg("[ DEBUG]",r,t);this.writeLogMsgToTerminal(o)}}info(r,t=void 0,...n){if(C(this.loggerName,"INFO")){let o=this.buildLogMsg("[  INFO]",r,t);this.writeLogMsgToTerminal(o)}}notice(r,t=void 0,...n){if(C(this.loggerName,"NOTICE")){let o=this.buildLogMsg("[NOTICE]",r,t);this.writeLogMsgToTerminal(o)}}fatal(r,t=void 0,...n){if(!C(this.loggerName,"FATAL"))return;if(typeof process<"u"&&process.env?.STATHAT_EZ_KEY!=null&&process.env?.STATHAT_EZ_KEY.trim()?.length>0&&process.env?.STATHAT_FATAL_KEY!=null&&process.env?.STATHAT_FATAL_KEY.trim()?.length>0){let i=new AbortController,a=setTimeout(()=>i.abort(),750),s="https://api.stathat.com/ez",u=`stat=${process.env.STATHAT_FATAL_KEY?.trim()}&ezkey=${process.env.STATHAT_EZ_KEY?.trim()}&count=1`,f=new Date;fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:i.signal,body:u}).then(y=>{let g=new Date().getTime()-f.getTime();clearTimeout(a)}).catch(y=>{})}typeof process<"u"&&process.env?.KPITRACKS_FATAL_KEY!=null&&process.env?.KPITRACKS_FATAL_KEY?.trim()?.length>0&&J(`stat=${process.env.KPITRACKS_FATAL_KEY?.trim()}&count=1`);let o=this.buildLogMsg("[ FATAL][ ERROR]",r,t);this.writeLogMsgToTerminal(o)}warn(r,t=void 0,...n){if(!C(this.loggerName,"WARN"))return;if(typeof process<"u"&&process.env?.STATHAT_EZ_KEY!=null&&process.env?.STATHAT_EZ_KEY?.trim()?.length>0&&process.env?.STATHAT_WARN_KEY!=null&&process.env?.STATHAT_WARN_KEY?.trim()?.length>0){let i=new AbortController,a=setTimeout(()=>i.abort(),750),s="https://api.stathat.com/ez",u=`stat=${process.env.STATHAT_WARN_KEY?.trim()}&ezkey=${process.env.STATHAT_EZ_KEY?.trim()}&count=1`,f=new Date;fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:i.signal,body:u}).then(y=>{let g=new Date().getTime()-f.getTime();clearTimeout(a)}).catch(y=>{})}typeof process<"u"&&process.env?.KPITRACKS_WARN_KEY!=null&&process.env?.KPITRACKS_WARN_KEY?.trim()?.length>0&&J(`stat=${process.env.KPITRACKS_WARN_KEY?.trim()}&count=1`);let o=this.buildLogMsg("[  WARN]",r,t);this.writeLogMsgToTerminal(o)}error(r,t=void 0,...n){if(!C(this.loggerName,"ERROR"))return;if(typeof process<"u"&&process.env?.STATHAT_EZ_KEY!=null&&process.env?.STATHAT_EZ_KEY?.trim()?.length>0&&process.env?.STATHAT_ERROR_KEY!=null&&process.env?.STATHAT_ERROR_KEY?.trim()?.length>0){let i=new AbortController,a=setTimeout(()=>i.abort(),750),s="https://api.stathat.com/ez",u=`stat=${process.env.STATHAT_ERROR_KEY?.trim()}&ezkey=${process.env.STATHAT_EZ_KEY?.trim()}&count=1`,f=new Date;fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:i.signal,body:u}).then(y=>{let g=new Date().getTime()-f.getTime();clearTimeout(a)}).catch(y=>{})}typeof process<"u"&&process.env?.KPITRACKS_ERROR_KEY!=null&&process.env?.KPITRACKS_ERROR_KEY?.trim()?.length>0&&J(`stat=${process.env.KPITRACKS_ERROR_KEY?.trim()}&count=1`);let o=this.buildLogMsg("[ ERROR]",r,t);this.writeLogMsgToTerminal(o)}};function w(e){return Dr.getLogger(e)}function At(e,r){if(typeof L<"u"&&L!=null){let t=L.getStore();return t==null&&(t={}),t.storeId=e,L.run(t,r)}else return r()}function b(e){return e==null?!1:!!["true","yes","t","y","1"].includes(e.toString().trim().toLowerCase())}var $r={levels:[]};function yo(e,r){if(r===e)return!0;if(!r.includes("*"))return!1;let t=r.split("*").map(o=>o.replace(/[.+?^${}()|[\]\\]/g,"\\$&")).join(".*");return new RegExp(`^${t}$`).test(e)}function ho(){return $r.levels}function xo(e,r){if(r.length===0)return null;for(let t of r)if(yo(e,t.pattern))return t.level;return null}var Mr=null;function bo(){return Mr===null&&(Mr=ho()),Mr}var K;function vo(){if(K!==void 0)return K;let e=p("LOG_LEVEL");if(!e)return K=null,null;let r=e.trim().toUpperCase(),t=["TRACE","DEBUG","INFO","NOTICE","WARN","ERROR","FATAL"];return t.includes(r)?(K=r,K):(console.log(`ts-gist-pile: Invalid LOG_LEVEL value: '${e}'. Valid values are: ${t.join(", ")}`),K=null,null)}function C(e,r){let t=bo(),n=xo(e,t);if(n!==null){let s=["TRACE","DEBUG","INFO","NOTICE","WARN","ERROR","FATAL"],l=s.indexOf(n);return s.indexOf(r)>=l}if(typeof process>"u")return["NOTICE","WARN","ERROR","FATAL"].includes(r);let o=!1,i=!1;switch(r){case"TRACE":let s=p("LOG_TRACE");s!==void 0&&(o=!0,i=b(s));break;case"DEBUG":let l=p("LOG_DEBUG");l!==void 0&&(o=!0,i=b(l));break;case"INFO":let u=p("LOG_INFO");u!==void 0&&(o=!0,i=b(u));break;case"NOTICE":let f=p("LOG_NOTICE");f!==void 0&&(o=!0,i=b(f));break;case"WARN":let y=p("LOG_WARN");y!==void 0&&(o=!0,i=b(y));break;case"ERROR":let g=p("LOG_ERROR");g!==void 0&&(o=!0,i=b(g));break;case"FATAL":let x=p("LOG_FATAL");x!==void 0&&(o=!0,i=b(x));break}if(o)return i;let a=vo();if(a!==null){let s=["TRACE","DEBUG","INFO","NOTICE","WARN","ERROR","FATAL"],l=s.indexOf(a);return s.indexOf(r)>=l}return["NOTICE","WARN","ERROR","FATAL"].includes(r)}var Ao=w("request.requestUtil");function kr(e){let r=i=>{if(e.get)return e.get(i);if(e.headers){let a=e.headers[i.toLowerCase()];return Array.isArray(a)?a[0]:a}},t=r("X-Forwarded-For"),n=r("X-Real-IP"),o=e.socket?.remoteAddress||null;if(Ao.debug(()=>`extractIpAddress(): X-Forwarded-For = ${c(t)},  X-Real-IP = ${c(n)},  socket = ${c(o)}`),t){let i=t.split(",")[0];return i?i.trim():null}return n||o}var Fr={};d(Fr,{DEFAULT_RETRY_OPTIONS:()=>ee,retryWithBackoff:()=>Kr});var ee={maxAttempts:3,backoffMs:100,backoffMultiplier:2,jitter:.1};function Et(e,r,t,n,o){let i=r*Math.pow(t,e-1);if(o!==void 0&&(i=Math.min(i,o)),n>0){let a=i*n*(Math.random()*2-1);i=i+a}return Math.max(0,Math.floor(i))}async function Kr(e,r){let{maxAttempts:t,backoffMs:n,maxDelayMs:o,backoffMultiplier:i=ee.backoffMultiplier,jitter:a=ee.jitter,shouldRetry:s,onRetry:l,onFailure:u}=r,f,y;for(let g=1;g<=t;g++)try{let x=await e();if(y=x,f=void 0,!s(void 0,x,g)||g===t)return x;let z=Et(g,n,i,a,o);l&&l(void 0,x,g,z),await new Promise(Ue=>setTimeout(Ue,z))}catch(x){if(f=x,y=void 0,!s(x,void 0,g)||g===t)throw u&&g===t&&u(x,void 0,g),x;let z=Et(g,n,i,a,o);l&&l(x,void 0,g,z),await new Promise(Ue=>setTimeout(Ue,z))}if(u&&u(f,y,t),f!==void 0)throw f;return y}var Gr={};d(Gr,{recursivelyFilterPropertiesCopy:()=>Eo,recursivelyFilterPropertiesInPlace:()=>Se});function Se(e,r){Array.isArray(e)?e.forEach(t=>{Se(t,r)}):typeof e=="object"&&e!=null&&Object.getOwnPropertyNames(e).forEach(function(t){r.indexOf(t)!==-1?delete e[t]:Se(e[t],r)})}function Eo(e,r){let t=structuredClone(e);return Se(t,r),t}var Ie=class{constructor(){this.bindings=new Map}bind(r){return new _e(this.bindings,r)}rebind(r){return this.unbind(r),new _e(this.bindings,r)}get(r){if(!this.bindings.has(r)){let t=typeof r=="symbol"?r.toString():r;throw new Error(`No binding found for service identifier: ${t}`)}return this.bindings.get(r)}isBound(r){return this.bindings.has(r)}unbind(r){return this.bindings.delete(r)}unbindAll(){this.bindings.clear()}get size(){return this.bindings.size}},_e=class{constructor(r,t){this.bindings=r;this.serviceIdentifier=t}toConstantValue(r){this.bindings.set(this.serviceIdentifier,r)}};var Tt=(e,r=0)=>{let t=[];try{let n=JSON.stringify(e,(o,i)=>typeof i=="object"&&i!==null?t.includes(i)?void 0:t.push(i)&&i:i,r);return t=null,n}catch{t=null;return}};var we=class{constructor(r,t){this.booleanValue=r,this.stringValue=t}getBooleanValue(){return this.booleanValue}getStringValue(){return this.stringValue}};var O=class{constructor(r,t){this.cachedFlag=r,this.value=t}isCached(){return this.cachedFlag}getValue(){return this.value}};var F=class F{static genget(r){let t=F._mapOfObjectIds.get(r);return t!=null?new O(!0,t):(t=W(),F._mapOfObjectIds.set(r,t),new O(!1,t))}static gengetObjectId(r){return F.genget(r).getValue()}};F._mapOfObjectIds=new WeakMap;var Re=F;var Ce=class{getNow(){return new Date}};var Le=class{constructor(r){this.dateProviderService=r}getYyyyMmDdStringAtUtc(){return er(this.dateProviderService.getNow())}getSpecifiedDateAsUtc(r){return new Date(this.dateProviderService.getNow().toUTCString())}};var v={fromDate:e=>{if(!(e instanceof Date))throw new Error("ImmutableUtc.fromDate() requires a Date object");if(isNaN(e.getTime()))throw new Error("ImmutableUtc.fromDate() received an invalid Date");return e.toISOString()},now:()=>new Date().toISOString(),parse:e=>{if(typeof e!="string")throw new Error("ImmutableUtc.parse() requires a string");let r=new Date(e);if(isNaN(r.getTime()))throw new Error(`ImmutableUtc.parse() received an invalid date string: ${e}`);return r},toDate:e=>v.parse(e),fromMillis:e=>{if(typeof e!="number"||isNaN(e))throw new Error("ImmutableUtc.fromMillis() requires a valid number");return v.fromDate(new Date(e))},toMillis:e=>v.toDate(e).getTime(),fromSeconds:e=>{if(typeof e!="number"||isNaN(e))throw new Error("ImmutableUtc.fromSeconds() requires a valid number");return v.fromMillis(e*1e3)},toSeconds:e=>Math.floor(v.toMillis(e)/1e3),isValid:e=>{if(typeof e!="string")return!1;try{let r=new Date(e);return!isNaN(r.getTime())&&r.toISOString()===e}catch{return!1}},compare:(e,r)=>v.toMillis(e)-v.toMillis(r),min:(e,r)=>v.compare(e,r)<=0?e:r,max:(e,r)=>v.compare(e,r)>=0?e:r};var N={fromString:e=>{if(typeof e!="string")throw new Error("CanonicalUuid.fromString() requires a string");let r=e.toLowerCase().trim();if(!re(r))throw new Error(`CanonicalUuid.fromString() received an invalid UUID: ${e}`);return r},parse:e=>N.fromString(e),v4:()=>dr().toLowerCase(),v7:()=>I().toLowerCase(),toString:e=>e,isValid:e=>typeof e!="string"?!1:re(e),compare:(e,r)=>e.localeCompare(r),min:(e,r)=>N.compare(e,r)<=0?e:r,max:(e,r)=>N.compare(e,r)>=0?e:r,getVersion:e=>{let r=e.charAt(14);return parseInt(r,16)},isV7:e=>N.getVersion(e)===7,isV4:e=>N.getVersion(e)===4};var zr={LRU:"LRU"},G=class G{constructor(r){if(this.maxAggregateMemoryInBytes=r.maxAggregateMemoryInBytes,this.evictionMode=r.evictionMode,this.store=new Map,this.currentMemoryUsage=0,this.maxAggregateMemoryInBytes<=0)throw new Error("maxAggregateMemoryInBytes must be greater than 0");if(this.evictionMode!==zr.LRU)throw new Error(`Unsupported eviction mode: ${this.evictionMode}`)}async put(r,t,n){this.store.has(r)&&await this.delete(r);let o=this.estimateEntryMemory(r,t);for(;this.currentMemoryUsage+o>this.maxAggregateMemoryInBytes&&this.store.size>0;)this.evictOldest();if(o>this.maxAggregateMemoryInBytes)throw new Error(`Entry size (${o} bytes) exceeds maxAggregateMemoryInBytes (${this.maxAggregateMemoryInBytes} bytes)`);let i={value:t,createdAt:Date.now(),ttlInSeconds:n};this.store.set(r,i),this.currentMemoryUsage+=o}async get(r){let t=this.store.get(r);if(!t)return;let n=Date.now(),o=Math.floor((n-t.createdAt)/1e3);if(t.ttlInSeconds!==void 0&&o>=t.ttlInSeconds){await this.delete(r);return}return this.store.delete(r),this.store.set(r,t),{value:t.value,ageInSeconds:o}}async exists(r){let t=this.store.get(r);if(!t)return!1;let n=Date.now(),o=Math.floor((n-t.createdAt)/1e3);return t.ttlInSeconds!==void 0&&o>=t.ttlInSeconds?(await this.delete(r),!1):(this.store.delete(r),this.store.set(r,t),!0)}async delete(r){let t=this.store.get(r);return t?(this.store.delete(r),this.currentMemoryUsage-=this.estimateEntryMemory(r,t.value),!0):!1}getCurrentMemoryUsage(){return this.currentMemoryUsage}getEntryCount(){return this.store.size}clear(){this.store.clear(),this.currentMemoryUsage=0}estimateEntryMemory(r,t){let n=r.length*G.BYTES_PER_CHAR,o=t?.byteLength??0,i=G.ENTRY_OVERHEAD;return n+o+i}evictOldest(){let r=this.store.keys().next().value;r!==void 0&&this.delete(r)}};G.ENTRY_OVERHEAD=100,G.BYTES_PER_CHAR=2;var Oe=G;var Ne=class{constructor(r,t){this.numHeaderRows=r;this.rowsOfCells=t;this.headerNameToIndexMap=new Map;if(!Array.isArray(t))throw new Error("Invalid Rows-of-Cells");let n=t.length,o=r-1,i=t[o];if(!Array.isArray(i))throw new Error("Invalid Header-Row-of-Cells");this.numNamedColumns=i.length;for(let a=0;a<this.numNamedColumns;++a){let s=i[a];if(Ke(s))throw new Error("Header column missing a name");if(this.headerNameToIndexMap.has(s))throw new Error(`Duplicate header: ${s}`);this.headerNameToIndexMap.set(s,a)}}getIndexOfHeaderName(r){let t=this.headerNameToIndexMap.get(r);if(typeof t>"u")throw new Error(`No column matching headerName = ${r}`);return t}getDataCorrespondingToHeaderInRow(r,t){if(!Array.isArray(t))throw new Error("Invalid row of data");let n=this.getIndexOfHeaderName(r);return t[n]}};var Me=class{constructor(r){this._attr={};this._attr=r||{}}addQuestion(r){this._attr.qAndA=this._attr.qAndA||[],this._attr.qAndA.push({question:r})}get prompt(){return this._attr.prompt}set prompt(r){this._attr.prompt=r}get additionalContext(){return this._attr.additionalContext}set additionalContext(r){this._attr.additionalContext=r}get qAndA(){return this._attr.qAndA}set qAndA(r){this._attr.qAndA=r}};var To=w("NoOpAddEventHandler"),Pe=class{addEvent(r,t,n,o,i){To.debug(()=>`addEvent(): Entering with tracer = ${c(r)},  span = ${c(t)},  name = ${c(n)},  attributes = ${c(o)},  time = ${c(i)}`)}};var So=w("NoOpSpanEndHandler"),De=class{spanEndJustInvoked(r){So.debug(()=>`spanEndJustInvoked(): Entering with span = ${c(r)}`)}};var St={maxAttempts:3,initialDelayMs:100,maxDelayMs:2e3,backoffMultiplier:2,jitter:.1,retryableOperations:["get","query"]},It={maxAttempts:5,initialDelayMs:50,maxDelayMs:1e4,backoffMultiplier:2,jitter:.15,retryableOperations:["get","query","put","update"]};var _t={timeoutMs:5e3,pollIntervalMs:100},wt={timeoutMs:1e3,pollIntervalMs:50},Rt={timeoutMs:3e4,pollIntervalMs:500};var Ct="0.0.328";return Dt(Io);})();
//# sourceMappingURL=ts-gist-pile.browser.min.js.map
